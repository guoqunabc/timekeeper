<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TimeKeeper è‡ªåŠ¨åŒ–æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #1a1a1a;
            color: white;
        }
        .test-container {
            max-width: 600px;
            margin: 0 auto;
        }
        .test-item {
            margin: 15px 0;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #ffcc00;
            background: #2a2a2a;
        }
        .test-item h3 {
            margin: 0 0 10px 0;
            color: #ffcc00;
        }
        .test-item p {
            margin: 5px 0;
            line-height: 1.6;
        }
        .pass { border-left-color: #28a745; background: #1a3d1a; }
        .fail { border-left-color: #dc3545; background: #3d1a1a; }
        .info { border-left-color: #17a2b8; background: #1a2d3d; }
        button {
            padding: 10px 20px;
            margin: 10px 5px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            color: white;
            font-size: 14px;
        }
        .primary { background: #007acc; }
        .success { background: #28a745; }
        .danger { background: #dc3545; }
        h1 { color: #ffcc00; text-align: center; }
        h2 { color: #66ccff; }
        .checklist {
            background: #2a2a2a;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        .checklist ul {
            list-style: none;
            padding: 0;
        }
        .checklist li {
            margin: 8px 0;
            padding: 5px 0;
        }
        .checklist li:before {
            content: "â–¡ ";
            font-size: 16px;
            margin-right: 8px;
        }
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        .status-pass { background: #28a745; }
        .status-fail { background: #dc3545; }
        .status-pending { background: #ffc107; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ¤– TimeKeeper è‡ªåŠ¨åŒ–æµ‹è¯•</h1>
        
        <div class="test-item info">
            <h3>ğŸ¤– è‡ªåŠ¨åŒ–æµ‹è¯•è¯´æ˜</h3>
            <p>è¿™æ˜¯TimeKeeperçš„è‡ªåŠ¨åŒ–APIæµ‹è¯•é¡µé¢ï¼Œä¼šè‡ªåŠ¨æ£€æµ‹æµè§ˆå™¨æ”¯æŒæƒ…å†µã€‚</p>
            <p>æ‰€æœ‰æµ‹è¯•ä¼šè‡ªåŠ¨è¿è¡Œï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œã€‚</p>
        </div>

        <div style="text-align: center; margin: 20px 0;">
            <button class="success" onclick="runAllTests()">ğŸš€ è¿è¡Œæ‰€æœ‰è‡ªåŠ¨åŒ–æµ‹è¯•</button>
            <button class="primary" onclick="runLocalTests()">ğŸ”§ è¿è¡ŒAPIæµ‹è¯•</button>
            <button class="danger" onclick="location.reload()">ğŸ”„ é‡ç½®é¡µé¢</button>
        </div>

        <div id="testResults"></div>
    </div>

    <script>
        function addTestResult(title, message, type = 'info') {
            const container = document.getElementById('testResults');
            const statusClass = type === 'pass' ? 'status-pass' : 
                              type === 'fail' ? 'status-fail' : 'status-pending';
            
            const resultHtml = `
                <div class="test-item ${type}">
                    <h3><span class="status-indicator ${statusClass}"></span>${title}</h3>
                    <p>${message}</p>
                    <small>æ—¶é—´: ${new Date().toLocaleTimeString()}</small>
                </div>
            `;
            container.insertAdjacentHTML('beforeend', resultHtml);
        }

        function runLocalTests() {
            addTestResult('æœ¬åœ°æµ‹è¯•', 'å¼€å§‹è¿è¡Œå¯åœ¨å½“å‰é¡µé¢éªŒè¯çš„åŠŸèƒ½', 'info');
            
            // æµ‹è¯•localStorageæ”¯æŒ
            try {
                localStorage.setItem('timekeeper_test', 'test_value');
                const value = localStorage.getItem('timekeeper_test');
                localStorage.removeItem('timekeeper_test');
                
                if (value === 'test_value') {
                    addTestResult('localStorageæ”¯æŒ', 'âœ… localStorageè¯»å†™åŠŸèƒ½æ­£å¸¸', 'pass');
                } else {
                    addTestResult('localStorageæ”¯æŒ', 'âŒ localStorageåŠŸèƒ½å¼‚å¸¸', 'fail');
                }
            } catch (e) {
                addTestResult('localStorageæ”¯æŒ', `âŒ localStorageä¸å¯ç”¨: ${e.message}`, 'fail');
            }
            
            // æµ‹è¯•Date.now()ç²¾åº¦
            const start = Date.now();
            setTimeout(() => {
                const end = Date.now();
                const diff = end - start;
                if (diff >= 100 && diff <= 150) {
                    addTestResult('å®šæ—¶å™¨ç²¾åº¦', `âœ… å®šæ—¶å™¨ç²¾åº¦æ­£å¸¸ (${diff}ms)`, 'pass');
                } else {
                    addTestResult('å®šæ—¶å™¨ç²¾åº¦', `âš ï¸ å®šæ—¶å™¨ç²¾åº¦å¼‚å¸¸ (${diff}ms)`, 'fail');
                }
            }, 100);
            
            // æµ‹è¯•JSONåŠŸèƒ½
            try {
                const testObj = { name: 'æµ‹è¯•', time: 300 };
                const jsonStr = JSON.stringify(testObj);
                const parsed = JSON.parse(jsonStr);
                
                if (parsed.name === 'æµ‹è¯•' && parsed.time === 300) {
                    addTestResult('JSONæ”¯æŒ', 'âœ… JSONåºåˆ—åŒ–/ååºåˆ—åŒ–æ­£å¸¸', 'pass');
                } else {
                    addTestResult('JSONæ”¯æŒ', 'âŒ JSONåŠŸèƒ½å¼‚å¸¸', 'fail');
                }
            } catch (e) {
                addTestResult('JSONæ”¯æŒ', `âŒ JSONä¸æ”¯æŒ: ${e.message}`, 'fail');
            }
            
            // æµ‹è¯•CSSåŠ¨ç”»æ”¯æŒ
            const testDiv = document.createElement('div');
            if ('animation' in testDiv.style || 'webkitAnimation' in testDiv.style) {
                addTestResult('CSSåŠ¨ç”»æ”¯æŒ', 'âœ… CSSåŠ¨ç”»åŠŸèƒ½å¯ç”¨', 'pass');
            } else {
                addTestResult('CSSåŠ¨ç”»æ”¯æŒ', 'âŒ CSSåŠ¨ç”»ä¸æ”¯æŒ', 'fail');
            }
            
            // æµ‹è¯•Blob APIï¼ˆCSVå¯¼å‡ºéœ€è¦ï¼‰
            if (typeof Blob === 'function' && typeof URL.createObjectURL === 'function') {
                addTestResult('æ–‡ä»¶å¯¼å‡ºæ”¯æŒ', 'âœ… Blob APIå¯ç”¨ï¼Œæ”¯æŒCSVå¯¼å‡º', 'pass');
            } else {
                addTestResult('æ–‡ä»¶å¯¼å‡ºæ”¯æŒ', 'âŒ Blob APIä¸æ”¯æŒï¼ŒCSVå¯¼å‡ºå¯èƒ½å¤±è´¥', 'fail');
            }
            
            addTestResult('APIæµ‹è¯•å®Œæˆ', 'âœ… æ‰€æœ‰åŸºç¡€APIæµ‹è¯•å®Œæˆ', 'pass');
        }
        
        // è¿è¡Œæ‰€æœ‰è‡ªåŠ¨åŒ–æµ‹è¯•
        function runAllTests() {
            addTestResult('å®Œæ•´æµ‹è¯•å¼€å§‹', 'å¼€å§‹è¿è¡Œæ‰€æœ‰è‡ªåŠ¨åŒ–æµ‹è¯•', 'info');
            runLocalTests();
            
            // é¡µé¢åŠ è½½æ€§èƒ½æµ‹è¯•
            setTimeout(() => {
                const loadTime = performance.timing.loadEventEnd - performance.timing.navigationStart;
                if (loadTime < 3000) {
                    addTestResult('é¡µé¢åŠ è½½æ€§èƒ½', `âœ… é¡µé¢åŠ è½½æ—¶é—´: ${loadTime}ms (è‰¯å¥½)`, 'pass');
                } else {
                    addTestResult('é¡µé¢åŠ è½½æ€§èƒ½', `âš ï¸ é¡µé¢åŠ è½½æ—¶é—´: ${loadTime}ms (è¾ƒæ…¢)`, 'fail');
                }
            }, 100);
            
            // å†…å­˜ä½¿ç”¨æ£€æµ‹
            if (performance.memory) {
                const memoryInfo = performance.memory;
                const usedMB = (memoryInfo.usedJSHeapSize / 1048576).toFixed(2);
                addTestResult('å†…å­˜ä½¿ç”¨', `âœ… JavaScriptå †å†…å­˜ä½¿ç”¨: ${usedMB}MB`, 'info');
            }
            
            // ç½‘ç»œçŠ¶æ€æ£€æµ‹
            if (navigator.onLine) {
                addTestResult('ç½‘ç»œçŠ¶æ€', 'âœ… ç½‘ç»œè¿æ¥æ­£å¸¸', 'pass');
            } else {
                addTestResult('ç½‘ç»œçŠ¶æ€', 'âš ï¸ ç½‘ç»œç¦»çº¿çŠ¶æ€', 'info');
            }
            
            addTestResult('è‡ªåŠ¨åŒ–æµ‹è¯•å®Œæˆ', 'âœ… æ‰€æœ‰è‡ªåŠ¨åŒ–æµ‹è¯•å®Œæˆ', 'pass');
        }

        // é¡µé¢åŠ è½½æ—¶çš„åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            addTestResult('æµ‹è¯•ç¯å¢ƒ', 'TimeKeeperè‡ªåŠ¨åŒ–æµ‹è¯•å·²å°±ç»ª', 'info');
            addTestResult('æµè§ˆå™¨ä¿¡æ¯', `${navigator.userAgent}`, 'info');
            
            // è‡ªåŠ¨è¿è¡ŒåŸºç¡€æµ‹è¯•
            setTimeout(() => {
                runLocalTests();
            }, 1000);
        });
    </script>
</body>
</html> 